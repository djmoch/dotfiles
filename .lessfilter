#!/bin/sh
if [ -d "$1" ]
then
    ls -lA --color=force "$1"
elif which pygmentize > /dev/null 2>&1
then
    case "$1" in
        *.awk|*.groff|*.java|*.js|*.m4|*.php|*.pl|*.pm|*.pod|*.sh|\
        *.ad[asb]|*.asm|*.inc|*.[ch]|*.[ch]pp|*.[ch]xx|*.cc|*.hh|\
        *.lsp|*.l|*.pas|*.p|*.xml|*.xps|*.xsl|*.axp|*.ppd|*.pov|\
        *.diff|*.patch|*.py|*.rb|*.sql|*.ebuild|*.eclass)
            pygmentize -O style=friendly -f 256 "$1";;
        *shrc*|*profile*)
            pygmentize -O style=friendly -f 256 -l sh "$1"
            ;;
        *tar*)
            tar -tf "$1"
            ;;
        *)
            grep "#\!/bin/bash" "$1" > /dev/null
            if [ "$?" -eq "0" ]; then
                pygmentize -O style=friendly -f 256 -l sh "$1"
            else
                exit 1
            fi
    esac
fi

exit 0
