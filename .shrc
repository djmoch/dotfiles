#
# ~/.shrc
#
# vim: ft=sh
[ -r "$HOME/.shrc.local" ] && . "$HOME/.shrc.local"

set -o emacs

PS1="$LOGNAME@\h:\W\$ "
export PS1

if type dircolors > /dev/null 2>&1
then
    if [ -n "$SOURCE_DIRCOLORS" ]
    then
        eval `dircolors "$HOME/.dir_colors"`
        unset SOURCE_DIRCOLORS
    fi
    alias ls="ls --color=auto"
    LSCOLORPARAM="--color=auto"
else
    CLICOLOR=1
    LSCOLORS=ExFxBxDxCxegedabagacad
    export CLICOLOR LSCOLORS
    LSCOLORPARAM=""
fi

alias ll="ls $LSCOLORPARAM -l"
alias la="ls $LSCOLORPARAM -A"
alias lla="ls $LSCOLORPARAM -lA"
unset LSCOLORPARAM

COLORIZE_CMDS="pacman grep egrep fgrep"
for cmd in $COLORIZE_CMDS
do
    if type $cmd > /dev/null 2>&1
    then
        alias $cmd="$cmd --color=auto"
    fi
done
unset COLORIZE_CMDS

alias tas="tmux attach-session -t"
alias tns="tmux new-session -s"
alias tls="tmux list-sessions"
alias ts="tmux-session"
alias psh="pass show"
alias pc="pass -c"
alias pls="pass ls"
alias feh="feh --auto-rotate --scale-down"
alias rsync="rsync -C --include=.git/"
alias ag="ag -p ~/.cvsignore"

if [ "$VISUAL" = "vi" ]
then
    alias vim="vi"
fi

case `uname -s` in
    *Darwin*)
        alias jackd="jackd -d coreaudio > /dev/null 2>&1 &"
        ;;
esac

if echo $LANG | grep UTF-8 > /dev/null 2>&1
then
    alias screen="screen -U"
fi

if type gpg-connect-agent > /dev/null 2>&1
then
    GPG_TTY=`tty`; export GPG_TTY
    gpg-connect-agent updatestartuptty /bye > /dev/null 2>&1

    if [ -z "$SSH_TTY" ] && type gpgconf > /dev/null 2>&1
    then
        if [ "`gpgconf --list-dirs agent-ssh-socket | wc -l`" -eq 1 ]
        then
            unset SSH_AGENT_PID
            SSH_AUTH_SOCK=`gpgconf --list-dirs agent-ssh-socket`
            export SSH_AUTH_SOCK
        fi
    fi
fi

if [ ! -f "$HOME/.hushlogin" ]
then
    if [ -r /etc/motd -a -n "$DISPLAY" -a -z "$SSH_TTY" ]
    then
        [ $SHLVL -le 1 ] && cat /etc/motd
    fi
fi
